## 什么是锁？
**锁是计算机协调多个进程或线程并发访问某一资源的机制**
## MySQL锁机制

* MySQL的锁机制比较简单，其最 显著的特点是不同的存储引擎支持不同的锁机制。
* MyISAM和MEMORY存储引擎采用的是表级锁（table-level locking）；
* BDB存储引擎采用的是页面锁（page-level locking），但也支持表级锁；
* InnoDB存储引擎既支持行级锁（row-level locking），也支持表级锁，但默认情况下是采用行级锁。 


### 乐观锁
   * 乐观锁假设认为数据一般情况下不会造成冲突，所以在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测，如果发现冲突了，则让返回用户错误的信息，让用户决定如何去做
   * 解决一些长期不会发生的操作，以及发生概率小的操作上
   ```
        举例子： 用户B的余额为100元，系统工作人员A给B的余额充值50元，同时B支付车钱时50元，A先提交，B后提交，余额就变成100-50=50元。但本该为
  100+50-50=100元。这就是典型的并发问题。
        解决方法 ：1、在update的时候添加where条件，查看balance是否是查询出的 
                 2、添加字段version 当读取数据时，将version字段的值一同读出，
        数据每更新一次，对此version值加一。当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的version值进行比对，
        如果数据库表当前版本号与第一次取出来的version值相等，则予以更新，否则认为是过期数据。
   ```
   * 乐观锁的缺点：性能有问题，可能会执行4次数据库操作，所以，如果严重程度很高，就不能用乐观锁 
    
### 悲观锁
   * 与乐观锁相对应的就是悲观锁了。悲观锁就是在操作数据时，认为此操作会出现数据冲突，所以在进行每次操作时都要通过获取锁才能进行对相同数据的操作 
   * 经常会发生数据冲突，严重程度较高。
   * 悲观锁优缺点： 
     悲观并发控制(悲观锁)采用”先取锁再分”的保守策略，为数据处理提供了安全的保证。但在效率方面，加锁机制会产生额外的开销，增加产生死锁的机会，降低程序性能。
   * 由悲观锁涉及到的另外两个锁概念就出来了，它们就是共享锁与排它锁。共享锁和排它锁是悲观锁的不同的实现，它俩都属于悲观锁的范畴。
   #### 共享锁
   * 共享锁指的就是对于多个不同的事务，对同一个资源共享同一个锁。相当于对于同一把门，它拥有多个钥匙一样。就像这样，你家有一个大门，大门的钥匙有好几把，你有一把，你女朋友有一把，
   你们都可能通过这把钥匙进入你们家。对于悲观锁，一般数据库已经实现了，共享锁也属于悲观锁的一种，那么共享锁在mysql中是通过什么命令来调用呢。
   通过查询资料，了解到通过在执行语句后面加上**lock in share mode**就代表对某些资源加上共享锁了
   #### 排它锁
   * 排它锁与共享锁相对应，就是指对于多个不同的事务，对同一个资源只能有一把锁。与共享锁类型，在需要执行的语句后面加上**for update**就可以了
